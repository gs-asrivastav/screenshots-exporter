<!DOCTYPE html>
<html>
<head>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/streamgraph.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
</head>
<body>
<div id="container"></div>
</body>
<script>
  console.info(`Loading Script Section:: [User Agent = ${navigator.appVersion}]`);
  window.renderHighChart = function (config) {
    const start = Date.now();
    console.info("Modifying configuration for rendering.");
    document.getElementById('container').height = config.height || 500;
    document.getElementById('container').width = config.width || 1000;

    console.info(`Chart Height=${config.height}, Chart Width=${config.width}`);
    config.chart = {
      ...config.chart || {},
      renderTo: 'container',
      animation: false,
      events: {
        load: function (event) {
          //When is chart ready?
          const cEvent = new CustomEvent('chart-render-ready');
          window.dispatchEvent(cEvent);
          console.info(`Successfully loaded chart, rendering took ${Date.now() - start}ms. [Timestamp = ${new Date()}]`);
        }
      }
    };
    const plotOptions = (config.plotOptions || {});
    const series = plotOptions.series || {};
    series.animation = false;
    plotOptions.series = series;
    config.plotOptions = plotOptions;
    Highcharts.chart(config);
  };
  let xEvent = new CustomEvent('container-ready');
  window.dispatchEvent(xEvent);
  console.info(`Script section load complete.`);
</script>
<style>
    #container {
        min-width: 310px;
        max-width: 800px;
        height: 400px;
        margin: 0 auto
    }
</style>
</html>
